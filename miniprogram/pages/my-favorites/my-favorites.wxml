<!-- pages/my-favorites/my-favorites.wxml -->
<view class="my-favorites-page">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-back" bindtap="goBack">
      <text>â€¹</text>
    </view>
    <text class="page-title">æˆ‘çš„æ”¶è—</text>
  </view>

  <!-- æ”¶è—åˆ—è¡¨ -->
  <scroll-view class="favorite-list" scroll-y>
    <!-- æ”¶è—é¡¹ -->
    <view class="favorite-item" wx:for="{{favoriteList}}" wx:key="id">
      <view class="favorite-header">
        <view class="favorite-type {{item.type}}">
          <text>{{item.type === 'express' ? 'å¿«é€’' : item.type === 'buy' ? 'ä»£ä¹°' : 'ä»£åŠ'}}</text>
        </view>
        <view class="favorite-status {{item.status}}">
          <text>{{getStatusText(item.status)}}</text>
        </view>
        <text class="favorite-reward">Â¥{{item.reward}}</text>
      </view>
      
      <view class="favorite-content">
        <text class="favorite-title">{{item.title}}</text>
        <view class="favorite-info">
          <text class="info-item">ğŸ“… {{item.createTime}}</text>
          <text class="info-item">â±ï¸ {{item.deadline}}</text>
        </view>
        
        <view class="favorite-location">
          <text>å–ä»¶: {{item.pickupLocation}}</text>
          <text>é€è¾¾: {{item.deliveryLocation}}</text>
        </view>
        
        <view class="favorite-publisher" wx:if="{{item.publisher}}">
          <text>å‘å¸ƒäºº: {{item.publisher.name}}</text>
          <text>ä¿¡ç”¨åˆ†: {{item.publisher.creditScore || 100}}</text>
        </view>
      </view>
      
      <view class="favorite-footer">
        <view class="favorite-actions">
          <button 
            class="action-btn accept" 
            bindtap="acceptTask" 
            data-id="{{item.id}}"
            wx:if="{{item.status === 'pending'}}"
          >
            ç«‹å³æ¥å•
          </button>
          <button 
            class="action-btn remove" 
            bindtap="removeFavorite" 
            data-id="{{item.id}}"
          >
            å–æ¶ˆæ”¶è—
          </button>
          <button 
            class="action-btn view" 
            bindtap="viewTaskDetail" 
            data-id="{{item.id}}"
          >
            æŸ¥çœ‹è¯¦æƒ…
          </button>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{favoriteList.length === 0}}" class="empty-state">
      <view class="empty-icon">â­</view>
      <text class="empty-title">æš‚æ— æ”¶è—çš„ä»»åŠ¡</text>
      <text class="empty-desc">åœ¨é¦–é¡µé‡åˆ°æ„Ÿå…´è¶£çš„ä»»åŠ¡å¯ä»¥æ”¶è—å“¦ï¼</text>
      <button class="empty-btn" bindtap="goToIndex">å»é¦–é¡µé€›é€›</button>
    </view>
  </scroll-view>
</view>