<!--pages/ques/ques-detail.wxml-->
<view class="detail-page">
  <scroll-view class="content-area" scroll-y="true">
    <!-- é—®é¢˜è¯¦æƒ… -->
    <view class="ques-detail">
      <!-- ç”¨æˆ·ä¿¡æ¯ -->
      <view class="user-section">
        <image class="user-avatar" src="{{quesDetail.userAvatar || '/images/default-avatar.png'}}" mode="aspectFill"></image>
        <view class="user-info">
          <text class="user-name">{{quesDetail.userName}}</text>
          <text class="publish-time">{{quesDetail.publishTime}}</text>
        </view>
      </view>

      <!-- é—®é¢˜å†…å®¹ -->
      <view class="ques-content">
        <text class="ques-text">{{quesDetail.content}}</text>
        <view class="ques-images" wx:if="{{quesDetail.images && quesDetail.images.length > 0}}">
          <image 
            class="ques-img" 
            wx:for="{{quesDetail.images}}" 
            wx:key="index" 
            src="{{item}}" 
            mode="aspectFill"
            bindtap="previewImage"
            data-url="{{item}}"
          ></image>
        </view>
      </view>

      <!-- ç‚¹èµç»Ÿè®¡ -->
      <view class="stats-bar">
        <view class="stat-item">
          <text class="icon">ğŸ‘</text>
          <text>{{quesDetail.likeCount || 0}} äººç‚¹èµ</text>
        </view>
        <view class="stat-item">
          <text class="icon">ğŸ’¬</text>
          <text>{{quesDetail.commentCount || 0}} æ¡è¯„è®º</text>
        </view>
      </view>
    </view>

    <!-- è¯„è®ºåˆ—è¡¨ -->
    <view class="comment-section">
      <view class="section-title">å…¨éƒ¨è¯„è®º</view>
      <view class="comment-list" wx:if="{{quesDetail.comments && quesDetail.comments.length > 0}}">
        <view class="comment-item" wx:for="{{quesDetail.comments}}" wx:key="id">
          <image class="comment-avatar" src="{{item.userAvatar || '/images/default-avatar.png'}}" mode="aspectFill"></image>
          <view class="comment-content">
            <text class="comment-user">{{item.userName}}</text>
            <text class="comment-text">{{item.content}}</text>
            <text class="comment-time">{{item.time}}</text>
          </view>
        </view>
      </view>
      <view class="empty-comment" wx:else>
        <text>æš‚æ— è¯„è®ºï¼Œå¿«æ¥æŠ¢æ²™å‘å§~</text>
      </view>
    </view>
  </scroll-view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="action-bar">
    <view class="comment-input" bindtap="focusInput">
      <input 
        class="input" 
        placeholder="è¯´ç‚¹ä»€ä¹ˆ..." 
        value="{{commentText}}"
        bindinput="onCommentInput"
        bindconfirm="submitComment"
        focus="{{inputFocus}}"
      />
    </view>
    <view class="action-btns">
      <view class="action-btn {{quesDetail.isLiked ? 'liked' : ''}}" bindtap="toggleLike">
        <text class="icon">{{quesDetail.isLiked ? 'â¤ï¸' : 'ğŸ¤'}}</text>
        <text>{{quesDetail.isLiked ? 'å·²èµ' : 'ç‚¹èµ'}}</text>
      </view>
      <view class="action-btn" bindtap="submitComment">
        <text class="icon">ğŸ’¬</text>
        <text>è¯„è®º</text>
      </view>
    </view>
  </view>
</view>
