<!--pages/buy-it/buy.wxml-->

<view class="container">
  <!-- æœç´¢åŒºåŸŸ -->
  <view class="search-section">
    <view class="search-box" bindtap="goToSearch">
      <text class="search-icon">ğŸ”</text>
      <input class="search-input" placeholder="æœç´¢" placeholder-class="placeholder-text" disabled="{{true}}"/>
    </view>
    <view class="my-btn" bindtap="goToMyOrders">
      <text>æˆ‘çš„</text>
    </view>
  </view>

  <!-- é¡¶éƒ¨tabæ  -->
  <view class="tab-bar">
    <view class="tab-item {{activeTab === 0 ? 'active' : ''}}" bindtap="switchTab" data-index="0">
      <text>å¾…æ¥å•</text>
      <view class="tab-underline" wx:if="{{activeTab === 0}}"></view>
    </view>
    <view class="tab-item {{activeTab === 1 ? 'active' : ''}}" bindtap="switchTab" data-index="1">
      <text>å·²æ¥å•</text>
      <view class="tab-underline" wx:if="{{activeTab === 1}}"></view>
    </view>
    <view class="tab-item {{activeTab === 2 ? 'active' : ''}}" bindtap="switchTab" data-index="2">
      <text>å·²å®Œæˆ</text>
      <view class="tab-underline" wx:if="{{activeTab === 2}}"></view>
    </view>
    <view class="tab-item {{activeTab === 3 ? 'active' : ''}}" bindtap="switchTab" data-index="3">
      <text>å·²è¿‡æœŸ</text>
      <view class="tab-underline" wx:if="{{activeTab === 3}}"></view>
    </view>
    <view class="tab-item {{activeTab === 4 ? 'active' : ''}}" bindtap="switchTab" data-index="4">
      <text>å…¨éƒ¨</text>
      <view class="tab-underline" wx:if="{{activeTab === 4}}"></view>
    </view>
  </view>

  <!-- è®¢å•åˆ—è¡¨ -->
  <scroll-view class="order-list" scroll-y="true" enhanced="true" show-scrollbar="false">
    <block wx:if="{{filteredOrders.length > 0}}">
      <view class="order-card" wx:for="{{filteredOrders}}" wx:key="id" bindtap="goToDetail" data-id="{{item.id}}">
        <!-- è®¢å•å¤´éƒ¨ -->
        <view class="order-header">
          <view class="order-price">
            <text class="price-value">{{item.price}}</text>
          </view>
          <view class="order-time">{{item.deadline}}</view>
          <view class="order-status {{item.statusClass}}">{{item.statusText}}</view>
        </view>
        
        <!-- è®¢å•å†…å®¹ -->
        <view class="order-content">
          <view class="order-title">{{item.title}}</view>
          <view class="order-desc">{{item.description}}</view>
        </view>

        <!-- ç´§æ€¥æ ‡ç­¾ -->
        <view class="urgent-tag" wx:if="{{item.isUrgent}}">
          <text>{{item.urgentLevel}}</text>
        </view>
      </view>
    </block>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{filteredOrders.length === 0}}">
      <text class="empty-text">æš‚æ— è®°å½•å“¦~</text>
    </view>
  </scroll-view>

  <!-- åº•éƒ¨å‘å¸ƒæŒ‰é’® -->
  <view class="publish-btn" bindtap="publishOrder">
    <text class="publish-icon">+</text>
    <text class="publish-text">å‘å¸ƒä»£ä¹°ä¿¡æ¯</text>
  </view>
</view>