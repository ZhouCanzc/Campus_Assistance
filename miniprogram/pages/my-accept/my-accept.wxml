<!-- pages/my-accept/my-accept.wxml -->
<view class="container">
  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-card">
    <view class="stats-title">æˆ‘æ¥å•çš„ä»»åŠ¡</view>
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-value">{{taskStats.total || 0}}</text>
        <text class="stat-label">å…¨éƒ¨</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{taskStats.inprogress || 0}}</text>
        <text class="stat-label">è¿›è¡Œä¸­</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{taskStats.completed || 0}}</text>
        <text class="stat-label">å·²å®Œæˆ</text>
      </view>
    </view>
  </view>

  <!-- ä»»åŠ¡ç­›é€‰ -->
  <view class="filter-tabs">
    <view class="filter-tab {{currentFilter === 'all' ? 'active' : ''}}" bindtap="changeFilter" data-filter="all">
      å…¨éƒ¨
    </view>
    <view class="filter-tab {{currentFilter === 'inprogress' ? 'active' : ''}}" bindtap="changeFilter" data-filter="inprogress">
      è¿›è¡Œä¸­
    </view>
    <view class="filter-tab {{currentFilter === 'completed' ? 'active' : ''}}" bindtap="changeFilter" data-filter="completed">
      å·²å®Œæˆ
    </view>
  </view>

  <!-- ä»»åŠ¡åˆ—è¡¨ -->
  <scroll-view class="task-list" scroll-y enhanced show-scrollbar="{{false}}">
    <view class="task-card" wx:for="{{taskList}}" wx:key="id">
      <view class="task-header">
        <view class="task-type-tag {{item.type}}">
          {{item.type === 'express' ? 'å¿«é€’' : item.type === 'buy' ? 'ä»£ä¹°' : item.type === 'urgent' ? 'æ€¥äº‹' : item.type === 'rent' ? 'ç§Ÿå€Ÿ' : 'é™ªæ›¿'}}
        </view>
        <view class="task-status-tag {{item.status}}">
          {{item.status === 'accepted' ? 'è¿›è¡Œä¸­' : item.status === 'completed' ? 'å·²å®Œæˆ' : 'å·²å–æ¶ˆ'}}
        </view>
        <view class="task-price">Â¥{{item.price}}</view>
      </view>
      
      <view class="task-content">
        <view class="task-title">{{item.title || item.goods || 'è®¢å•ä»»åŠ¡'}}</view>
        <view class="task-info">
          <text>ğŸ“… {{item.createTime}}</text>
          <text>â±ï¸ {{item.deadline}}</text>
        </view>
        <view class="task-publisher">
          <text>å‘å¸ƒäºº: {{item.publisher}}</text>
          <text class="phone">ğŸ“ {{item.publisherPhone}}</text>
        </view>
      </view>
      
      <view class="task-actions" wx:if="{{item.status === 'accepted'}}">
        <button class="action-btn complete" catchtap="completeTask" data-id="{{item.id}}" data-type="{{item.type}}">å®Œæˆ</button>
        <button class="action-btn cancel" catchtap="cancelAccept" data-id="{{item.id}}" data-type="{{item.type}}">å–æ¶ˆ</button>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{taskList.length === 0}}" class="empty-state">
      <view class="empty-icon">ğŸ¤</view>
      <text class="empty-title">æš‚æ— æ¥å•çš„ä»»åŠ¡</text>
      <text class="empty-desc">å¿«å»é¦–é¡µæ¥å–ä»»åŠ¡å§ï¼</text>
      <button class="empty-btn" bindtap="goToIndex">å»é¦–é¡µæ¥å•</button>
    </view>
  </scroll-view>
</view>