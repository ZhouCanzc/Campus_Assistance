<!--pages/express/express-detail.wxml-->

<view class="container">
  <!-- é¡¶éƒ¨åˆ†äº«æŒ‰é’® -->
  <button class="top-share-btn" open-type="share">
    <text class="share-icon">â†—</text>
    <text class="share-text">åˆ†äº«</text>
  </button>

  <!-- è®¢å•çŠ¶æ€æ ‡ç­¾ -->
  <view class="status-badge {{orderDetail.statusClass}}">
    <text>{{orderDetail.statusText}}</text>
  </view>

  <!-- è®¢å•å¡ç‰‡ -->
  <view class="order-card">
    <!-- è®¢å•æ ‡é¢˜ -->
    <view class="order-title">{{orderDetail.pickupAddress}} - {{orderDetail.deliveryAddress}}</view>
    
    <!-- å‘å¸ƒä¿¡æ¯ -->
    <view class="order-meta">
      <text class="meta-date">ğŸ“… {{orderDetail.createTime}}</text>
      <text class="meta-type">ä»£å–å¿«é€’</text>
    </view>

    <!-- è®¢å•è¯¦æƒ…åˆ—è¡¨ -->
    <view class="detail-list">
      <view class="detail-item">
        <text class="detail-label">æ¥å•æˆªæ­¢</text>
        <text class="detail-value highlight">{{orderDetail.deadline}} â°</text>
      </view>
      
      <view class="detail-item">
        <text class="detail-label">å–è´§åœ°å€</text>
        <text class="detail-value">{{orderDetail.pickupAddress}}</text>
      </view>
      
      <view class="detail-item">
        <text class="detail-label">å–è´§è¯¦æƒ…</text>
        <text class="detail-value">{{orderDetail.pickupDetail}}</text>
      </view>
      
      <view class="detail-item">
        <text class="detail-label">é€è´§åœ°å€</text>
        <text class="detail-value">{{orderDetail.deliveryAddress}}</text>
      </view>
      
      <view class="detail-item">
        <text class="detail-label">é€è´§è¯¦æƒ…</text>
        <text class="detail-value">{{orderDetail.deliveryDetail}}</text>
      </view>
      
      <view class="detail-item">
        <text class="detail-label">æ‰“èµé‡‘é¢(å…ƒ)</text>
        <text class="detail-value price">{{orderDetail.price}}</text>
      </view>
      
      <view class="detail-item">
        <text class="detail-label">å‘å¸ƒè€…</text>
        <text class="detail-value">{{orderDetail.publisher}}</text>
      </view>
      
      <view class="detail-item">
        <text class="detail-label">è”ç³»ç”µè¯</text>
        <text class="detail-value phone" bindtap="contactPublisher">{{orderDetail.publisherPhone}} ğŸ“</text>
      </view>
      
      <view class="detail-item" wx:if="{{orderDetail.accepter}}">
        <text class="detail-label">æ¥å•è€…</text>
        <text class="detail-value">{{orderDetail.accepter}}</text>
      </view>
      
      <view class="detail-item" wx:if="{{orderDetail.accepterPhone}}">
        <text class="detail-label">æ¥å•è€…ç”µè¯</text>
        <text class="detail-value phone" bindtap="contactAccepter">{{orderDetail.accepterPhone}} ğŸ“</text>
      </view>
      
      <view class="detail-item" wx:if="{{orderDetail.description}}">
        <text class="detail-label">è¯¦ç»†æè¿°</text>
        <text class="detail-value">{{orderDetail.description}}</text>
      </view>
    </view>

    <!-- æ¥å•äººä¿¡æ¯ -->
    <view class="accepter-section" wx:if="{{orderDetail.status !== 'pending'}}">
      <view class="section-title">æ¥å•äººä¿¡æ¯</view>
      <view class="accepter-info">
        <text>{{orderDetail.showAccepter ? orderDetail.accepterName : 'ä»…å‘èµ·äººæˆ–è€…æ¥å•äººå¯è§'}}</text>
      </view>
    </view>
  </view>

  <!-- æ‚¬æµ®é¦–é¡µæŒ‰é’® -->
  <view class="home-btn" bindtap="goHome">
    <text class="home-icon">ğŸ </text>
    <text class="home-text">é¦–é¡µ</text>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <view class="action-btn favorite {{isFavorite ? 'active' : ''}}" bindtap="toggleFavorite">
      <text class="action-icon">{{isFavorite ? 'â˜…' : 'â˜†'}}</text>
      <text>æ”¶è—</text>
    </view>
    
    <!-- å¾…æ¥å•çŠ¶æ€æ˜¾ç¤ºæ¥å•æŒ‰é’® -->
    <block wx:if="{{orderDetail.status === 'pending'}}">
      <view class="main-action accept" bindtap="acceptOrder">
        <text>æˆ‘è¦æ¥å•</text>
      </view>
    </block>
    
    <!-- å·²æ¥å•çŠ¶æ€æ˜¾ç¤ºå–æ¶ˆå’Œå®ŒæˆæŒ‰é’® -->
    <block wx:if="{{orderDetail.status === 'accepted'}}">
      <view class="main-action cancel" bindtap="cancelOrder">
        <text>å–æ¶ˆæ¥å•</text>
      </view>
      <view class="main-action pay" bindtap="goToPayment">
        <text>å»æ”¯ä»˜</text>
      </view>
      <view class="main-action complete" bindtap="completeOrder">
        <text>å®Œæˆè®¢å•</text>
      </view>
    </block>
    
    <!-- å·²å®Œæˆæˆ–å·²è¿‡æœŸçŠ¶æ€ -->
    <block wx:if="{{orderDetail.status === 'completed' || orderDetail.status === 'expired'}}">
      <view class="main-action disabled">
        <text>{{orderDetail.status === 'completed' ? 'å·²å®Œæˆ' : 'å·²è¿‡æœŸ'}}</text>
      </view>
    </block>
  </view>
</view>
