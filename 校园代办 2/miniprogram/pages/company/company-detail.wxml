<!--pages/company/company-detail.wxml-->

<view class="container">
  <!-- é¡¶éƒ¨åˆ†äº«æŒ‰é’® -->
  <button class="top-share-btn" open-type="share">
    <text class="share-icon">â†—</text>
    <text class="share-text">åˆ†äº«</text>
  </button>

  <!-- è®¢å•çŠ¶æ€æ ‡ç­¾ -->
  <view class="status-badge {{orderDetail.statusClass}}">
    <text>{{orderDetail.statusText}}</text>
  </view>

  <!-- è®¢å•å¡ç‰‡ -->
  <view class="order-card">
    <!-- è®¢å•æ ‡é¢˜ -->
    <view class="order-title">{{orderDetail.title}}</view>
    
    <!-- å‘å¸ƒä¿¡æ¯ -->
    <view class="order-meta">
      <text class="meta-date">ğŸ“… {{orderDetail.createTime}}</text>
      <text class="meta-type">é™ªæ›¿æœåŠ¡</text>
    </view>

    <!-- è®¢å•è¯¦æƒ…åˆ—è¡¨ -->
    <view class="detail-list">
      <view class="detail-item">
        <text class="detail-label">éœ€æ±‚æ ‡é¢˜</text>
        <text class="detail-value">{{orderDetail.title}}</text>
      </view>
      
      <view class="detail-item">
        <text class="detail-label">æ‰“èµé‡‘é¢</text>
        <text class="detail-value price">Â¥{{orderDetail.price}}</text>
      </view>
      
      <view class="detail-item">
        <text class="detail-label">éœ€æ±‚æè¿°</text>
        <text class="detail-value">{{orderDetail.description}}</text>
      </view>
      
      <view class="detail-item">
        <text class="detail-label">è”ç³»äºº</text>
        <text class="detail-value">{{orderDetail.contact || orderDetail.publisher}}</text>
      </view>
      
      <view class="detail-item">
        <text class="detail-label">è”ç³»ç”µè¯</text>
        <text class="detail-value">{{orderDetail.phone || orderDetail.publisherPhone}}</text>
      </view>
      
      <view class="detail-item">
        <text class="detail-label">æˆªæ­¢æ—¶é—´</text>
        <text class="detail-value highlight">{{orderDetail.deadline}}</text>
      </view>
      
      <view class="detail-item" wx:if="{{orderDetail.urgentLevel}}">
        <text class="detail-label">ç´§æ€¥ç¨‹åº¦</text>
        <text class="detail-value highlight">{{orderDetail.urgentLevel}}</text>
      </view>
    </view>

    <!-- æ¥å•äººä¿¡æ¯ -->
    <view class="accepter-section" wx:if="{{orderDetail.status === 'accepted' || orderDetail.status === 'completed'}}">
      <view class="section-title">æ¥å•ä¿¡æ¯</view>
      <view class="accepter-info">
        <text>æ¥å•äººï¼š{{orderDetail.accepter || 'æœªçŸ¥'}}</text>
        <text wx:if="{{canViewPrivacy}}">ç”µè¯ï¼š{{orderDetail.accepterPhone}}</text>
      </view>
    </view>
  </view>

  <!-- é¦–é¡µæŒ‰é’® -->
  <view class="home-btn" bindtap="goHome">
    <text class="home-icon">ğŸ </text>
    <text class="home-text">é¦–é¡µ</text>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <view class="action-btn favorite {{isFavorite ? 'active' : ''}}" bindtap="toggleFavorite">
      <text class="action-icon">{{isFavorite ? 'â˜…' : 'â˜†'}}</text>
      <text>æ”¶è—</text>
    </view>
    
    <!-- å¾…æ¥å•çŠ¶æ€æ˜¾ç¤ºæ¥å•æŒ‰é’® -->
    <block wx:if="{{orderDetail.status === 'pending'}}">
      <view class="main-action accept" bindtap="acceptOrder">
        <text>æˆ‘è¦æ¥å•</text>
      </view>
    </block>
    
    <!-- å·²æ¥å•çŠ¶æ€æ˜¾ç¤ºå–æ¶ˆå’Œå®ŒæˆæŒ‰é’® -->
    <block wx:if="{{orderDetail.status === 'accepted'}}">
      <view class="main-action cancel" bindtap="cancelAccept">
        <text>å–æ¶ˆæ¥å•</text>
      </view>
      <view class="main-action pay" bindtap="goToPay">
        <text>å»æ”¯ä»˜</text>
      </view>
      <view class="main-action complete" bindtap="completeOrder">
        <text>å®Œæˆè®¢å•</text>
      </view>
    </block>
    
    <!-- å·²å®Œæˆæˆ–å·²è¿‡æœŸçŠ¶æ€ -->
    <block wx:if="{{orderDetail.status === 'completed' || orderDetail.status === 'expired'}}">
      <view class="main-action disabled">
        <text>{{orderDetail.status === 'completed' ? 'å·²å®Œæˆ' : 'å·²è¿‡æœŸ'}}</text>
      </view>
    </block>
  </view>
</view>
