<!-- pages/login/login.wxml -->
<view class="login-page">
  <!-- 顶部logo -->
  <view class="logo-section">
    <view class="logo">🚀</view>
    <text class="app-name">校园代取小程序</text>
    <text class="app-slogan">方便快捷的校园生活服务平台</text>
  </view>

  <!-- 学号登录卡片 -->
  <view class="form-section">
    <view class="input-group">
      <view class="input-item">
        <text class="input-label">学号</text>
        <input 
          class="input-field" 
          placeholder="请输入学号" 
          value="{{studentId}}"
          bindinput="onStudentIdInput"
          maxlength="12"
        />
      </view>
      
      <view class="input-item">
        <text class="input-label">密码</text>
        <input 
          class="input-field" 
          placeholder="请输入密码" 
          password
          value="{{password}}"
          bindinput="onPasswordInput"
        />
      </view>
      
      <!-- 确认密码仅在注册模式显示，避免登录时误以为需要填写 -->
      <view class="input-item" wx:if="{{isRegisterMode}}">
        <text class="input-label">确认密码</text>
        <input 
          class="input-field" 
          placeholder="请再次输入密码" 
          password
          value="{{confirmPassword}}"
          bindinput="onConfirmPasswordInput"
        />
      </view>
    </view>
    
    <!-- 登录/注册按钮 -->
    <button 
      class="login-btn" 
      bindtap="handleLogin"
      disabled="{{!canSubmit}}"
    >
      {{isRegisterMode ? '注册' : '登录'}}
    </button>
    
    <!-- 切换登录/注册模式 -->
    <view class="mode-switch" bindtap="toggleMode">
      <text>{{isRegisterMode ? '已有账号？去登录' : '没有账号？去注册'}}</text>
    </view>

    <!-- 微信登录 -->
    <view class="wechat-login">
      <view class="divider">
        <view class="divider-line"></view>
        <text class="divider-text">或</text>
        <view class="divider-line"></view>
      </view>
      <button 
        class="wechat-btn" 
        open-type="getPhoneNumber"
        bindgetphonenumber="handleWechatPhoneLogin"
        loading="{{wechatLoading}}"
        disabled="{{wechatLoading}}"
      >
        <text class="wechat-icon">微</text>
        <text class="wechat-btn-text">微信一键登录</text>
      </button>
      <text class="wechat-tips">授权微信头像昵称并自动创建账户</text>
    </view>
  </view>
  
  <!-- 用户协议 -->
  <view class="agreement">
    <text>登录即表示同意</text>
    <text class="agreement-link">《用户服务协议》</text>
    <text>和</text>
    <text class="agreement-link">《隐私政策》</text>
  </view>
</view>
