<!-- pages/my-favorites/my-favorites.wxml -->
<view class="container">
  <!-- é¡¶éƒ¨ç»Ÿè®¡ -->
  <view class="top-stats">
    <view class="stats-content">
      <view class="stats-icon">â­</view>
      <view class="stats-info">
        <view class="stats-title">æˆ‘çš„æ”¶è—</view>
        <view class="stats-desc">å…±æ”¶è— {{favoriteList.length || 0}} ä¸ªä»»åŠ¡</view>
      </view>
    </view>
  </view>

  <!-- æ”¶è—åˆ—è¡¨ -->
  <scroll-view class="favorite-list" scroll-y enhanced show-scrollbar="{{false}}">
    <!-- æ”¶è—é¡¹ -->
    <view class="favorite-item" wx:for="{{favoriteList}}" wx:key="id">
      <view class="favorite-header">
        <view class="task-type {{item.type}}">
          {{item.type === 'express' ? 'å¿«é€’' : item.type === 'buy' ? 'ä»£ä¹°' : item.type === 'urgent' ? 'æ€¥äº‹' : item.type === 'rent' ? 'ç§Ÿå€Ÿ' : 'é™ªæ›¿'}}
        </view>
        <view class="task-status {{item.status}}">
          {{item.status === 'pending' ? 'å¾…æ¥å•' : item.status === 'accepted' ? 'å·²æ¥å•' : 'å·²å®Œæˆ'}}
        </view>
        <view class="task-reward">Â¥{{item.price || item.reward}}</view>
      </view>
      
      <view class="task-content">
        <view class="task-title">{{item.title || item.goods || 'æ”¶è—ä»»åŠ¡'}}</view>
        <view class="task-info">
          <text>ğŸ“… {{item.createTime}}</text>
          <text>â±ï¸ {{item.deadline}}</text>
        </view>
        <view class="task-publisher">
          <text>å‘å¸ƒäºº: {{item.publisher}}</text>
        </view>
      </view>
      
      <view class="favorite-actions">
        <button class="action-btn accept" wx:if="{{item.status === 'pending'}}" catchtap="acceptTask" data-id="{{item.id}}" data-type="{{item.type}}">
          ç«‹å³æ¥å•
        </button>
        <button class="action-btn remove" catchtap="removeFavorite" data-id="{{item.id}}">
          å–æ¶ˆæ”¶è—
        </button>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{favoriteList.length === 0}}" class="empty-state">
      <view class="empty-icon">â­</view>
      <text class="empty-title">æš‚æ— æ”¶è—çš„ä»»åŠ¡</text>
      <text class="empty-desc">åœ¨é¦–é¡µé‡åˆ°æ„Ÿå…´è¶£çš„ä»»åŠ¡å¯ä»¥æ”¶è—å“¦ï¼</text>
      <button class="empty-btn" bindtap="goToIndex">å»é¦–é¡µé€›é€›</button>
    </view>
  </scroll-view>
</view>