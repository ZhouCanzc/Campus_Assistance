<!-- pages/search/search.wxml -->
<view class="search-page">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <view class="search-input-wrapper">
      <icon class="search-icon" type="search" size="16"></icon>
      <input 
        class="search-input" 
        placeholder="æœç´¢è®¢å•åç§°" 
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        bindconfirm="onSearch"
        focus="{{true}}"
      />
      <icon 
        wx:if="{{searchKeyword}}" 
        class="clear-icon" 
        type="clear" 
        size="16" 
        bindtap="clearSearch"
      ></icon>
    </view>
    <view class="cancel-btn" bindtap="goBack">å–æ¶ˆ</view>
  </view>

  <!-- æœç´¢ç»“æœ -->
  <view class="search-results" wx:if="{{searchResults.length > 0}}">
    <view class="results-title">æœç´¢ç»“æœï¼ˆ{{searchResults.length}}ï¼‰</view>
    <block wx:for="{{searchResults}}" wx:key="id">
      <view class="order-card" bindtap="viewOrderDetail" data-id="{{item.id}}" data-type="{{item.type}}">
        <view class="order-header">
          <view class="order-title">{{item.title || item.pickupAddress + ' - ' + item.deliveryAddress}}</view>
          <view class="order-status {{item.statusClass}}">{{item.statusText}}</view>
        </view>
        <view class="order-info">
          <text class="order-type">{{item.typeText}}</text>
          <text class="order-price">Â¥{{item.price}}</text>
        </view>
        <view class="order-time">{{item.createTime}}</view>
      </view>
    </block>
  </view>

  <!-- æ— æœç´¢ç»“æœ -->
  <view class="empty-result" wx:if="{{hasSearched && searchResults.length === 0}}">
    <text class="empty-icon">ğŸ”</text>
    <text class="empty-text">æ— è¯¥è®¢å•~</text>
  </view>

  <!-- å†å²æœç´¢è®°å½• -->
  <view class="search-history" wx:if="{{!hasSearched && searchHistory.length > 0}}">
    <view class="history-header">
      <text class="history-title">å†å²æœç´¢</text>
      <text class="clear-history" bindtap="clearHistory">æ¸…ç©º</text>
    </view>
    <view class="history-list">
      <block wx:for="{{searchHistory}}" wx:key="index">
        <view class="history-item" bindtap="searchFromHistory" data-keyword="{{item}}">
          <icon class="history-icon" type="search" size="14"></icon>
          <text class="history-keyword">{{item}}</text>
          <icon class="delete-icon" type="clear" size="14" bindtap="deleteHistoryItem" data-index="{{index}}" catchtap></icon>
        </view>
      </block>
    </view>
  </view>

  <!-- é»˜è®¤çŠ¶æ€ -->
  <view class="search-tips" wx:if="{{!hasSearched && searchHistory.length === 0}}">
    <text class="tips-icon">ğŸ’¡</text>
    <text class="tips-text">è¾“å…¥è®¢å•åç§°è¿›è¡Œæœç´¢</text>
  </view>
</view>
